<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>45 Alliance Calendar</title>
    <!-- React & ReactDOM CDN -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700;900&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; background: #000; margin: 0; padding: 0; overflow: hidden; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); grid-template-rows: repeat(6, 1fr); height: 100%; }
        video { transition: opacity 1s ease-in-out; }
        
        /* PC 레이아웃 최적화 */
        .header-grid {
            display: grid;
            grid-template-columns: 140px 110px 1fr 110px 140px;
            align-items: center;
            gap: 1.5rem;
        }

        @media (max-width: 768px) {
            .header-grid { grid-template-columns: 1fr 1fr; gap: 0.5rem; }
            .mobile-hide { display: none !important; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        const App = () => {
            // [초기화] 2025년 12월부터 시작
            const [currentM, setCurrentM] = useState(12);
            const [currentY, setCurrentY] = useState(2025);
            const [selectedImg, setSelectedImg] = useState(null);

            const FRAME_IMG = "https://cdn.pixabay.com/photo/2019/04/03/17/46/poster-4100927_1280.jpg";

            // [데이터] 13개월 (2025.12 ~ 2026.12) 리소스 매핑
            const config = useMemo(() => ({
                "2025-12": { 
                    themeColor: "#F7D794", 
                    vid: "https://cdn.pixabay.com/video/2022/11/20/139834-773444672_large.mp4", // 새 12월 영상
                    p1: "https://drive.google.com/file/d/1QHfesNYkEwyt8KhCURamG41Odcc-lsfv/view?usp=drive_link", 
                    p2: "https://drive.google.com/file/d/1fkshsyCBhaZuDNG_18XC-MkVQFP28I0T/view?usp=drive_link" 
                },
                "2026-1": { themeColor: "#FF4D4D", vid: "https://cdn.pixabay.com/video/2025/02/23/260397_large.mp4", p1: "https://drive.google.com/file/d/17CUK6dgyD46m0qqobFDTibLslnqHHTs1/view?usp=drive_link", p2: "https://drive.google.com/file/d/1mqZ9GOBBk4d3mgxcck_8g1-R-xaINFtq/view?usp=drive_link" },
                "2026-2": { themeColor: "#A29BFE", vid: "https://cdn.pixabay.com/video/2023/04/14/158830-817668585_large.mp4", p1: "https://drive.google.com/file/d/1GJFt-qfhl2LLsnPeCddaR2fbguFHJR5x/view?usp=drive_link", p2: "https://drive.google.com/file/d/1ts7DQa8J7VqKIwh2sX5KE8v3mT617HOx/view?usp=drive_link" },
                "2026-3": { themeColor: "#55E6C1", vid: "https://cdn.pixabay.com/video/2023/04/03/157278-814358485_large.mp4", p1: "https://drive.google.com/file/d/1YnVZilMJoY25i5g8fWLOWTOv3vnyo3ld/view?usp=drive_link", p2: "https://drive.google.com/file/d/1Ec3J0E3Oduufr1FpJ6iHbyfQokKb3I43/view?usp=drive_link" },
                "2026-4": { themeColor: "#FAD390", vid: "https://cdn.pixabay.com/video/2020/07/23/45399-443057201_large.mp4", p1: "https://drive.google.com/file/d/10cF9pH6OrdOsH0ayd8tQMJqTgb8-lTf0/view?usp=drive_link", p2: "https://drive.google.com/file/d/1DQfnqp_pju3fBplDBVTwRWBKShhXoFej/view?usp=drive_link" },
                "2026-5": { themeColor: "#B8E994", vid: "https://cdn.pixabay.com/video/2020/06/29/43445-436041758_tiny.mp4", p1: "https://drive.google.com/file/d/1PGwBKH3ZCe27Sf-g6aNFUmGzXHufgTDQ/view?usp=drive_link", p2: "https://drive.google.com/file/d/1nL5-XOozy0JUWqkTIoe00HXk1raG0q03/view?usp=drive_link" },
                "2026-6": { themeColor: "#81ECEC", vid: "https://cdn.pixabay.com/video/2020/06/20/42673-432087063_large.mp4", p1: "https://drive.google.com/file/d/1ErGykeN_IDdL5x72JLd07ATyeZn3i266/view?usp=drive_link", p2: "https://drive.google.com/file/d/1TH6HOoAiOomHhrnXKMypN74Z8hoxDJXe/view?usp=drive_link" },
                "2026-7": { themeColor: "#74B9FF", vid: "https://cdn.pixabay.com/video/2023/07/20/172451-847505208_large.mp4", p1: "https://drive.google.com/file/d/1maRCHZQmzNPNPv2vmFhWP3OMM86MrFYL/view?usp=drive_link", p2: "https://drive.google.com/file/d/1Vynewu_yThgjCIlYB5QsPtn1CyZ9gR-5/view?usp=drive_link" },
                "2026-8": { themeColor: "#FFE11A", vid: "https://cdn.pixabay.com/video/2022/08/22/128729-742053550_large.mp4", p1: "https://drive.google.com/file/d/1ML1orR0G7cHaB-3nZ5KN1hTV5DBKPc-U/view?usp=drive_link", p2: "https://drive.google.com/file/d/1FJzACRrIA-I4PJyI_obNPT6nJWCKDRQt/view?usp=drive_link" },
                "2026-9": { themeColor: "#E84393", vid: "https://cdn.pixabay.com/video/2019/10/29/28453-369807721_large.mp4", p1: "https://drive.google.com/file/d/1OhanTRyGw6VWREvSTAjLasXGswwHn35d/view?usp=drive_link", p2: "https://drive.google.com/file/d/1twEhSI5S_inETiMxNnbmPvXVy1YNCZZz/view?usp=drive_link" },
                "2026-10": { themeColor: "#D63031", vid: "https://cdn.pixabay.com/video/2018/09/25/18420-292228405_large.mp4", p1: "https://drive.google.com/file/d/16Fdfb30HNVhB4RXar_JZdicfntZEY6Ai/view?usp=drive_link", p2: "https://drive.google.com/file/d/1hBAuyG84Xew7JJ6Q1F2tLfsijLwdn-4V/view?usp=drive_link" },
                "2026-11": { themeColor: "#636E72", vid: "https://cdn.pixabay.com/video/2025/01/22/254098_large.mp4", p1: "https://drive.google.com/file/d/1wFarZw1_j6nAY3vr4VeFWnEmw-iGKSH6/view?usp=drive_link", p2: "https://drive.google.com/file/d/1fW84FSFDDPwx27Geg6C0Q48XEz8kOCHB/view?usp=drive_link" },
                "2026-12": { 
                    themeColor: "#F7D794", 
                    vid: "https://cdn.pixabay.com/video/2020/12/31/60784-496654956_large.mp4", // 기존 2025.12 겨울 영상
                    p1: "https://drive.google.com/file/d/1QHfesNYkEwyt8KhCURamG41Odcc-lsfv/view?usp=drive_link", 
                    p2: "https://drive.google.com/file/d/1fkshsyCBhaZuDNG_18XC-MkVQFP28I0T/view?usp=drive_link" 
                },
            }), []);

            const toDirect = (url) => {
                if (!url) return "";
                const m = url.match(/\/d\/(.+?)\//);
                return m ? `https://lh3.googleusercontent.com/d/${m[1]}` : url;
            };

            const move = (delta) => {
                let nextM = currentM + delta;
                let nextY = currentY;
                if (nextM > 12) { nextM = 1; nextY++; }
                else if (nextM < 1) { nextM = 12; nextY--; }
                
                // 범위 제한 (2025-12 ~ 2026-12)
                if (nextY === 2025 && nextM < 12) return;
                if (nextY > 2026) return;
                if (nextY === 2026 && nextM > 12) return;

                setCurrentM(nextM);
                setCurrentY(nextY);
            };

            const generateDays = (year, month) => {
                const first = new Date(year, month - 1, 1).getDay();
                const last = new Date(year, month, 0).getDate();
                const prevLast = new Date(year, month - 1, 0).getDate();
                const days = [];
                for (let i = first; i > 0; i--) days.push({ date: prevLast - i + 1, other: true });
                for (let i = 1; i <= last; i++) days.push({ date: i, other: false });
                while (days.length < 42) days.push({ date: days.length - (first + last) + 1, other: true });
                return days;
            };

            const currentKey = `${currentY}-${currentM}`;
            const currentData = config[currentKey];
            const calendarDays = generateDays(currentY, currentM);
            
            // 다음 달 정보 계산 (상단 우측용)
            const nextInfo = (() => {
                let m = currentM + 1; let y = currentY;
                if (m > 12) { m = 1; y++; }
                return { m, y };
            })();

            return (
                <div className="relative w-full h-screen flex items-center justify-center overflow-hidden bg-black text-white">
                    {/* 배경 영상 레이어 */}
                    <video key={currentData.vid} autoPlay loop muted playsInline className="absolute inset-0 w-full h-full object-cover z-0">
                        <source src={currentData.vid} type="video/mp4" />
                    </video>

                    {/* 메인 캘린더 카드 */}
                    <div className="relative z-10 w-full max-w-5xl h-[92vh] mx-4 p-8 flex flex-col rounded-3xl border border-white/10 shadow-2xl overflow-hidden" style={{ background: 'rgba(0, 0, 0, 0.15)' }}>
                        <header className="header-grid pb-6 mb-6 border-b border-white/20 h-[180px]">
                            {/* 1. 이전 달 제어 (PC) */}
                            <div onClick={() => move(-1)} className="mobile-hide cursor-pointer group flex flex-col items-center">
                                <div className="text-[0.7rem] font-bold text-white mb-2">{currentM === 1 ? 12 : currentM - 1}월</div>
                                <div className="grid grid-cols-7 gap-1 opacity-50 group-hover:opacity-100 transition-opacity">
                                    {generateDays(currentM === 1 ? currentY - 1 : currentY, currentM === 1 ? 12 : currentM - 1).map((d, i) => <div key={i} className="text-[0.5rem] text-center">{d.other ? "" : d.date}</div>)}
                                </div>
                            </div>

                            {/* 2. 왼쪽 사진 */}
                            <div onClick={() => setSelectedImg(toDirect(currentData.p1))} className="w-full aspect-square rounded-xl overflow-hidden border border-white/20 shadow-lg group bg-black/20 cursor-zoom-in">
                                <img src={toDirect(currentData.p1)} className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" alt="L" />
                            </div>

                            {/* 3. 중앙 타이틀: 모임이름(45 ALLIANCE) + 메인 월 */}
                            <div className="flex flex-col items-center justify-center space-y-1 overflow-hidden text-center">
                                <span className="text-xs font-black tracking-[0.4em] text-white/90 drop-shadow-lg mb-2">45 ALLIANCE</span>
                                <div className="flex items-center space-x-6 w-full justify-center">
                                    <button onClick={() => move(-1)} className="text-2xl font-thin hover:opacity-100 transition-opacity">‹</button>
                                    <h1 className="text-6xl md:text-7xl font-black tracking-tighter leading-none drop-shadow-[0_4px_12px_rgba(0,0,0,1)]" style={{ color: currentData.themeColor }}>{currentM}월</h1>
                                    <button onClick={() => move(1)} className="text-2xl font-thin hover:opacity-100 transition-opacity">›</button>
                                </div>
                                <span className="text-[0.6rem] tracking-[0.6em] font-light opacity-60 mt-2">{currentY}</span>
                            </div>

                            {/* 4. 오른쪽 사진 */}
                            <div onClick={() => setSelectedImg(toDirect(currentData.p2))} className="w-full aspect-square rounded-xl overflow-hidden border border-white/20 shadow-lg group bg-black/20 cursor-zoom-in">
                                <img src={toDirect(currentData.p2)} className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" alt="R" />
                            </div>

                            {/* 5. 다음 달 미리보기 (주인님 요청 반영) */}
                            <div onClick={() => move(1)} className="mobile-hide cursor-pointer group flex flex-col items-center">
                                <div className="text-[0.7rem] font-bold text-white mb-2">{nextInfo.m}월</div>
                                <div className="grid grid-cols-7 gap-1 opacity-50 group-hover:opacity-100 transition-opacity">
                                    {generateDays(nextInfo.y, nextInfo.m).map((d, i) => <div key={i} className="text-[0.5rem] text-center">{d.other ? "" : d.date}</div>)}
                                </div>
                            </div>
                        </header>

                        {/* 달력 날짜 영역 */}
                        <section className="flex-1 flex flex-col">
                            <div className="grid grid-cols-7 mb-4 text-[0.8rem] font-bold tracking-widest text-white text-center opacity-60">
                                <div className="text-[#FF4D4D]">SUN</div><div>MON</div><div>TUE</div><div>WED</div><div>THU</div><div>FRI</div><div className="text-[#3498DB]">SAT</div>
                            </div>
                            <div className="calendar-grid gap-1">
                                {calendarDays.map((d, i) => {
                                    const isToday = new Date().getMonth() + 1 === currentM && new Date().getFullYear() === currentY && new Date().getDate() === d.date && !d.other;
                                    return (
                                        <div key={i} className={`flex flex-col items-center justify-center rounded-2xl transition-all duration-300 ${d.other ? 'opacity-20 font-thin' : 'opacity-100 font-bold'} ${isToday ? 'bg-white text-black shadow-xl scale-105' : 'hover:bg-white/10'}`}>
                                            <span className={`text-xl drop-shadow-[0_3px_6px_rgba(0,0,0,1)] ${!d.other && (i % 7 === 0) ? 'text-[#FF4D4D]' : ''} ${!d.other && (i % 7 === 6) ? 'text-[#3498DB]' : ''}`}>{d.date}</span>
                                        </div>
                                    );
                                })}
                            </div>
                        </section>
                    </div>

                    {/* 이미지 확대 모달 (Gallery Frame) */}
                    {selectedImg && (
                        <div className="fixed inset-0 z-[100] flex items-center justify-center p-2 md:p-6 overflow-hidden cursor-zoom-out" onClick={() => setSelectedImg(null)} style={{ background: 'rgba(0, 0, 0, 0.96)', backdropFilter: 'blur(15px)' }}>
                            <div className="relative flex items-center justify-center w-[98vw] h-[92vh]" onClick={(e) => e.stopPropagation()}>
                                <img src={FRAME_IMG} className="absolute w-full h-full object-contain pointer-events-none drop-shadow-2xl" alt="F" />
                                <div className="relative w-[92%] h-[92%] flex items-center justify-center overflow-hidden">
                                    <img src={selectedImg} className="w-full h-full object-contain" alt="P" style={{ filter: 'contrast(1.05) brightness(1.05)' }} />
                                </div>
                                <button className="absolute top-4 right-4 w-14 h-14 bg-white/10 hover:bg-red-600 text-white rounded-full flex items-center justify-center border border-white/10 backdrop-blur-2xl z-50 group" onClick={() => setSelectedImg(null)}>
                                    <span className="text-2xl group-hover:rotate-90 transition-transform">✕</span>
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
